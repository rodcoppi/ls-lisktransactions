# =============================================================================
# STAGING ENVIRONMENT CONFIGURATION
# =============================================================================
# This file should be deployed to staging environment
# Contains staging-specific configurations and secrets
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION CONFIGURATION
# -----------------------------------------------------------------------------
NODE_ENV=staging
NEXT_PUBLIC_APP_NAME="Lisk Counter Dashboard (Staging)"
NEXT_PUBLIC_APP_VERSION="1.0.0-staging"
NEXT_PUBLIC_ENVIRONMENT=staging

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
PORT=3000
HOST=0.0.0.0
BASE_URL=https://staging.lisk-dashboard.com
NEXT_PUBLIC_API_BASE_URL=https://staging.lisk-dashboard.com/api
NEXT_PUBLIC_WS_URL=wss://staging.lisk-dashboard.com

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION (Staging)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://lisk_staging:${STAGING_DB_PASSWORD}@staging-db.internal:5432/lisk_dashboard_staging
DATABASE_POOL_MAX=20
DATABASE_POOL_MIN=5
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_SSL=true

# Read replica for scaling tests
DATABASE_READ_URL=postgresql://lisk_staging_read:${STAGING_DB_READ_PASSWORD}@staging-db-read.internal:5432/lisk_dashboard_staging

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION (Staging)
# -----------------------------------------------------------------------------
REDIS_URL=redis://:${STAGING_REDIS_PASSWORD}@staging-cache.internal:6379
REDIS_PASSWORD=${STAGING_REDIS_PASSWORD}
REDIS_DB=0
REDIS_MAX_RETRIES=5
REDIS_CONNECTION_TIMEOUT=10000

# Redis Cluster for high availability testing
REDIS_CLUSTER_NODES=staging-cache-1.internal:7000,staging-cache-2.internal:7001,staging-cache-3.internal:7002

# -----------------------------------------------------------------------------
# LISK BLOCKCHAIN API CONFIGURATION (Staging)
# -----------------------------------------------------------------------------
LISK_API_BASE_URL=https://blockscout.lisk.com/api/v2
LISK_API_KEY=${STAGING_LISK_API_KEY}
LISK_API_RATE_LIMIT=500
LISK_API_TIMEOUT=30000
LISK_SERVICE_URL=https://service.lisk.com
LISK_SERVICE_API_KEY=${STAGING_LISK_SERVICE_KEY}
LISK_WS_URL=wss://service.lisk.com/blockchain

# -----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY (Staging - Production-like)
# -----------------------------------------------------------------------------
JWT_SECRET=${STAGING_JWT_SECRET}
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=3d
SESSION_SECRET=${STAGING_SESSION_SECRET}
SESSION_SECURE=true
SESSION_SAME_SITE=strict
CSRF_SECRET=${STAGING_CSRF_SECRET}
BCRYPT_ROUNDS=12

# Rate limiting (production-like)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=200

# -----------------------------------------------------------------------------
# FEATURE FLAGS (Staging - Testing New Features)
# -----------------------------------------------------------------------------
FEATURE_REAL_TIME_UPDATES=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_USER_MANAGEMENT=true
FEATURE_API_DOCUMENTATION=true
FEATURE_MULTI_TENANT=true
FEATURE_DARK_MODE=true
FEATURE_EXPORT_DATA=true
FEATURE_ALERTS_SYSTEM=true
FEATURE_EDGE_CACHING=true
FEATURE_COMPRESSION=true
FEATURE_SERVICE_WORKER=true
FEATURE_ADMIN_PANEL=true
FEATURE_SYSTEM_MONITORING=true
FEATURE_AUDIT_LOGGING=true

# -----------------------------------------------------------------------------
# EXTERNAL SERVICES (Staging)
# -----------------------------------------------------------------------------
SENTRY_DSN=${STAGING_SENTRY_DSN}
NEXT_PUBLIC_SENTRY_DSN=${STAGING_SENTRY_PUBLIC_DSN}
SENTRY_ORG=lisk-dashboard
SENTRY_PROJECT=lisk-counter-staging
SENTRY_AUTH_TOKEN=${STAGING_SENTRY_AUTH_TOKEN}

NEXT_PUBLIC_ANALYTICS_ID=${STAGING_ANALYTICS_ID}
ANALYTICS_SECRET=${STAGING_ANALYTICS_SECRET}

# Email Service
EMAIL_SERVICE=sendgrid
EMAIL_API_KEY=${STAGING_EMAIL_API_KEY}
EMAIL_FROM_ADDRESS=staging@lisk-dashboard.com
EMAIL_FROM_NAME="Lisk Dashboard Staging"

# Cloud Storage
CLOUD_STORAGE_PROVIDER=aws
AWS_ACCESS_KEY_ID=${STAGING_AWS_ACCESS_KEY}
AWS_SECRET_ACCESS_KEY=${STAGING_AWS_SECRET_KEY}
AWS_REGION=us-east-1
AWS_S3_BUCKET=lisk-dashboard-staging-assets

CDN_BASE_URL=https://staging-cdn.lisk-dashboard.com
CDN_API_KEY=${STAGING_CDN_API_KEY}

# -----------------------------------------------------------------------------
# MONITORING & OBSERVABILITY (Staging)
# -----------------------------------------------------------------------------
APM_SERVICE_NAME=lisk-counter-staging
APM_ENVIRONMENT=staging
APM_SECRET_TOKEN=${STAGING_APM_TOKEN}
APM_SERVER_URL=https://staging-apm.lisk-dashboard.com

METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5000

LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_FILES=30
LOG_MAX_SIZE=50m

# -----------------------------------------------------------------------------
# CACHING CONFIGURATION (Staging - Production-like)
# -----------------------------------------------------------------------------
CACHE_TTL_SHORT=300
CACHE_TTL_MEDIUM=1800
CACHE_TTL_LONG=43200
CACHE_TTL_STATIC=604800

CACHE_WARM_ON_START=true
CACHE_WARM_POPULAR_ENDPOINTS=true

BROWSER_CACHE_MAX_AGE=31536000
BROWSER_CACHE_IMMUTABLE=true

# -----------------------------------------------------------------------------
# MULTI-TENANT CONFIGURATION (Staging - Testing)
# -----------------------------------------------------------------------------
MULTI_TENANT_ENABLED=true
TENANT_ISOLATION_MODE=subdomain
DEFAULT_TENANT=staging
TENANT_DATABASE_STRATEGY=shared

TENANT_CUSTOM_DOMAINS_ENABLED=true
TENANT_BRANDING_ENABLED=true

# -----------------------------------------------------------------------------
# SECURITY CONFIGURATION (Staging - Production-like)
# -----------------------------------------------------------------------------
CSP_REPORT_URI=https://staging-csp.lisk-dashboard.com/report
CSP_REPORT_ONLY=false

CORS_ORIGINS=https://staging.lisk-dashboard.com,https://staging-admin.lisk-dashboard.com
CORS_CREDENTIALS=true

HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# -----------------------------------------------------------------------------
# DEPLOYMENT CONFIGURATION (Staging)
# -----------------------------------------------------------------------------
NEXT_TELEMETRY_DISABLED=1
DISABLE_ESLINT_PLUGIN=false
SKIP_TYPE_CHECK=false

K8S_NAMESPACE=lisk-dashboard-staging
K8S_DEPLOYMENT_NAME=lisk-counter-staging

# -----------------------------------------------------------------------------
# STAGING-SPECIFIC CONFIGURATION
# -----------------------------------------------------------------------------
# Enable features for testing
ENABLE_QUERY_LOGGING=false
ENABLE_PERFORMANCE_MONITORING=true
VERBOSE_LOGGING=false

# Load testing preparation
LOAD_TEST_MODE=false
SYNTHETIC_DATA_GENERATION=false

# Staging database seeding
SEED_DATABASE=false
SEED_ADMIN_EMAIL=admin@staging.lisk-dashboard.com